{#
    Copyright (c) 2015 Chintalagiri Shashank
    Released under the MIT license
#}

{% macro render_status(inv_loc_status, inv_total_quantity,
                       inv_total_reservations, inv_total_availability) -%}
<div class="small-12 medium-6 columns">
    <div class="small-12 columns panel header radius">
        <div class="sign small-9 medium-6 small-centered columns autoscale">
            <h6>Inventory Status</h6>
        </div>
        <div class="small-12 columns">
            <table id="inv_status_table" class="display" data-paging='false'>
                <thead>
                <tr>
                    <th class="all">Inventory Location</th>
                    <th class="desktop">Quantity</th>
                    <th class="desktop">Reserved</th>
                    <th class="all">Available</th>
                </tr>
                </thead>
                <tbody>
                {% for code, status in inv_loc_status|dictsort %}
                    <tr>
                        <td> <a href="/inventory/location/{{ code }}">{{ status.0 }}</a> </td>
                        <td class="text-center"> {{ status.1 or '-' }} </td>
                        <td class="text-center"> {{ status.2 or '-' }} </td>
                        <td class="text-center"> {{ status.3 or '-' }} </td>
                    </tr>
                {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td> <b> TOTAL </b> </td>
                        <td class="text-center"><b>{{ inv_total_quantity }}</b></td>
                        <td class="text-center"><b>{{ inv_total_reservations }}</b></td>
                        <td class="text-center"><b>{{ inv_total_availability }}</b></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <script type="text/javascript">
            $(document).ready( function () {
                var table = $('#inv_status_table').DataTable({
                    /* Disable initial sort */
                    "aaSorting": [],
                    "info": false,
                    {% include 'parts/datatable_defaults.html' %}
                });
                table.buttons().container()
                    .appendTo( '#inv_status_table_wrapper .small-12.medium-6.columns:eq(0)' );
            });
        </script>
    </div>
</div>
{% endmacro -%}
