{#
    Copyright (c) 2015 Chintalagiri Shashank
    Released under the MIT license
#}

{% extends "base_templates/base.html" %}
{% import "parts/sort_filter.html" as sort_filter %}

{% block main %}

<h3> Cards </h3>

<div class="row">
    <form id="filters"><fieldset>
    <legend> Sort & Filter Options </legend>
        {{ sort_filter.render_dimension('Status', 'cstatus', stage.statuses, stage.cards|length) }}
        {{ sort_filter.render_dimension('Series', 'cseries', stage.series|dictsort, stage.cards|length) }}
        <div class="row collapse">
            <div class="large-6 small-12 columns">
                <div class="row collapse">
                    <div class="large-2 small-3 columns text-right">
                        <ul class="sort-group button-group radius">
                            <li><a class="sort button tiny" data-sort="ctitle:asc"><i class="fi-arrow-up"></i></a></li>
                            <li><a class="sort button tiny" data-sort="ctitle:desc"><i class="fi-arrow-down"></i></a></li>
                        </ul>
                    </div>
                    <div class="large-2 small-9 columns">
                        <div class="filterhead">
                            Title
                        </div>
                    </div>
                    <div class="filter-group search large-8 columns">
                        <input type="text" placeholder="Search ..."/>
                    </div>
                </div>
            </div>
            <div class="large-6 small-12 columns">
                <div class="small-4 columns right">
                    <a id="reset" class="button expand tiny">Reset</a>
                </div>
            </div>
        </div>
    </fieldset></form>
</div>
<div class="row">
    <ul id="card-container" class="small-block-grid-1 medium-block-grid-2 large-block-grid-3" data-equalizer>
        {% for card in stage.cards %}
        <li class="card-instance {{ card.status }} {{ card.configs.snoseries }}" data-title="{{ card.ident|lower }}">
            <a href="{{ card.ident }}">
                <ul class="pricing-table active-tb shadow mrgn-20-top">
                    <li class="title autoscale"> {{ card.ident }} </li>
                    <li class="description"> {{ card.desc }} </li>
                    {% if card.status %}
                      <span class="right label radius {{ card.status.html_class }}"> {{ card.status }}</span>
                    {% endif %}
                    {% if card.configs.snoseries %}
                      <span class="right label radius secondary">{{ card.configs.snoseries }}</span>
                    {% endif %}
                    {% if card.validation_errors.nerrors %}
                      <span class="left label radius alert">{{ card.validation_errors.nerrors }} Errors</span>
                    {% endif %}
                    {% if card.validation_errors.nwarnings %}
                      <span class="left label radius warning">{{ card.validation_errors.nwarnings }} Warnings</span>
                    {% endif %}
                </ul>
            </a>
        </li>
        {% endfor %}
    </ul>
    {% assets "mixer_js" %}
          <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
</div>

{% endblock %}
