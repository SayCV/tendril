<!DOCTYPE HTML>
<html class="no-js" lang="en">
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title> {% if pagetitle %} {{ pagetitle }} | {% endif %} Koala </title>
      <link rel="stylesheet" href="/static/css/normalize.css" />
      <link rel="stylesheet" href="/static/css/foundation.css" />
      <link rel="stylesheet" href="/static/css/foundation-icons.css">
      <link rel="stylesheet" href="/static/css/koala.css">
      <script src="/static/js/vendor/modernizr.js"></script>
  </head>
<body>
    <div class="sticky">
    <nav class="top-bar" data-topbar role="navigation">
        <ul class="title-area">
	        <li class="name">
	            <h1><a href="{{ url_for('home_page') }}">Koala</a></h1>
	        </li>
            <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
	        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
        </ul>
        <section class="top-bar-section">
	    <!-- Right Nav Section -->
        <ul class="right">
            <li class="has-form">
              <div class="row collapse">
                <div class="large-8 small-9 columns">
                  <input type="text" placeholder="Find Stuff">
                </div>
                <div class="large-4 small-3 columns">
                  <a href="#" class="alert button expand">Search</a>
                </div>
              </div>
            </li>
	        <li class="has-dropdown">
	    	    {% if current_user.is_authenticated() %}
                <a href="#">{{ current_user.full_name or current_user.user_auth.username }}</a>
                <ul class="dropdown">
		  		    <li><a href="{{ url_for('user_profile_page') }}">User Profile</a></li>
                    <li><a href="{{ url_for('user.logout') }}">Log Out</a></li>
				</ul>
                {% else %}
                <a href="{{ url_for('user.login') }}">Log In</a>
                {% endif %}
	        </li>
	    </ul>
	    <!-- Left Nav Section -->
	    <ul class="left">
        </ul>
        </section>
    </nav>
    </div>

    <div class="row">
      <div class="small-10 large-6 small-centered columns">
      {# One-time system messages called Flash messages #}
      {% block flash_messages %}
	  {%- with messages = get_flashed_messages(with_categories=true) -%}
	      {% if messages %}
		    {% for category, message in messages %}
		      {% if category=='error' %}
			    {% set category='danger' %}
		      {% endif %}
		      <div data-alert class="alert-box {{category}} radius">
                  {{ message|safe }}
                  <a href="#" class="close">âŠ—</a>
              </div>
		    {% endfor %}
	      {% endif %}
	  {%- endwith %}
      {% endblock %}
      </div>
    </div>
    <div class="small-12 large-10 columns small-centered">
        {% block main %}{% endblock %}
    </div>
    <script src="/static/js/vendor/jquery.js"></script>
    <script src="/static/js/foundation/foundation.js"></script>
    <script src="/static/js/foundation/foundation.topbar.js"></script>
    <script src="/static/js/foundation/foundation.dropdown.js"></script>
    <script src="/static/js/foundation/foundation.magellan.js"></script>
    <script src="/static/js/foundation/foundation.equalizer.js"></script>
    <script src="/static/js/foundation/foundation.alert.js"></script>
    <script>
    $(document).foundation( {
        equalizer : {
            // Specify if Equalizer should make elements equal height once they become stacked.
            equalize_on_stack: false,
            // Allow equalizer to resize hidden elements
            act_on_hidden_el: false
        }
    });
    </script>
</body>
</html>
